# –ü—Ä–æ–∫—Å–∏ - –®–ø–∞—Ä–≥–∞–ª–∫–∞

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (30 —Å–µ–∫—É–Ω–¥)

### 1Ô∏è‚É£ –î–æ–±–∞–≤–∏—Ç—å –≤ `.env`:
```bash
HTTPS_PROXY=http://proxy.company.com:8080
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
npm start
```

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
```
[Proxy] Using proxy for https://cloudcode-pa.googleapis.com/...
[GeminiAPI] Stream request will be routed through proxy
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –ó–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏

---

## üéØ –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ó–∞–¥–∞—á–∞ | –ö–æ–º–∞–Ω–¥–∞ |
|--------|---------|
| **–ü—Ä–æ–∫—Å–∏ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** | `HTTPS_PROXY=http://proxy.com:8080` |
| **–ü—Ä–æ–∫—Å–∏ —Å –ª–æ–≥–∏–Ω–æ–º/–ø–∞—Ä–æ–ª–µ–º** | `HTTPS_PROXY=http://user:pass@proxy.com:8080` |
| **–ò—Å–∫–ª—é—á–∏—Ç—å —Ö–æ—Å—Ç—ã** | `NO_PROXY=localhost,127.0.0.1,.local` |
| **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** | `echo $HTTPS_PROXY` |
| **–û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–∫—Å–∏** | `unset HTTPS_PROXY` |
| **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ —Å–µ—Å—Å–∏—é** | `HTTPS_PROXY=... npm start` |

---

## üìù –ü—Ä–∏–º–µ—Ä—ã `.env`

### –ú–∏–Ω–∏–º—É–º
```bash
HTTPS_PROXY=http://proxy.company.com:8080
```

### –ü–æ–ª–Ω—ã–π
```bash
HTTPS_PROXY=http://user:pass@proxy.company.com:3128
NO_PROXY=localhost,127.0.0.1,.internal.local
```

### –ë–µ–∑ –ø—Ä–æ–∫—Å–∏
```bash
# –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å HTTPS_PROXY –∏–∑ .env
```

---

## üìä –õ–æ–≥–∏ - —á—Ç–æ –æ–Ω–∏ –æ–∑–Ω–∞—á–∞—é—Ç

| –õ–æ–≥ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----|----------|
| `[Proxy] Using proxy for ...` | ‚úÖ –ü—Ä–æ–∫—Å–∏ –∞–∫—Ç–∏–≤–µ–Ω |
| `[Proxy] No proxy configured` | ‚ö™ –ü—Ä–æ–∫—Å–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω |
| `[Proxy] Bypassing proxy for host` | ‚ö™ –•–æ—Å—Ç –≤ NO_PROXY |
| `[Proxy] Error creating proxy` | ‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è |
| `Stream request will be routed through proxy` | ‚úÖ –ó–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ |
| `Stream request will be sent directly` | ‚ö™ –ó–∞–ø—Ä–æ—Å –±–µ–∑ –ø—Ä–æ–∫—Å–∏ |

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è HTTPS:
1. `HTTPS_PROXY` ‚Üê –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤–æ–π
2. `https_proxy`
3. `ALL_PROXY`
4. `all_proxy`

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è:
- `NO_PROXY` –∏–ª–∏ `no_proxy`

---

## ‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

| –û—à–∏–±–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|
| `Connection refused` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥—Ä–µ—Å/–ø–æ—Ä—Ç –ø—Ä–æ–∫—Å–∏ |
| `Authentication failed` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å |
| `Bypassing proxy` | –•–æ—Å—Ç –≤ NO_PROXY - —É–¥–∞–ª–∏—Ç—å –æ—Ç—Ç—É–¥–∞ |
| –ü—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `echo $HTTPS_PROXY` |

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
echo $HTTPS_PROXY

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–æ–∫—Å–∏
curl -x http://proxy.company.com:8080 https://google.com

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ª–æ–≥–∞–º–∏
npm start 2>&1 | grep -i proxy
```

---

## üìÇ –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- **[`src/config.ts`](src/config.ts:23-57)** - –§—É–Ω–∫—Ü–∏—è `getProxyDispatcher()`
- **[`src/gemini-client.ts`](src/gemini-client.ts:499-508)** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- **[`PROXY_USAGE.md`](PROXY_USAGE.md)** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[`PROXY_EXAMPLES.md`](PROXY_EXAMPLES.md)** - –ü—Ä–∏–º–µ—Ä—ã –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏

---

## üöÄ –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å –ø—Ä–æ–∫—Å–∏

```bash
HTTPS_PROXY=http://proxy.company.com:8080 npm start
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- ‚úÖ –ü–∞—Ä–æ–ª–∏ –≤ –ª–æ–≥–∞—Ö **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ **Node.js**
- ‚úÖ –ù–∞ **Cloudflare Workers** –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –≤ URL –ø—Ä–æ–∫—Å–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–∏—Å–∫–ª—é—á–µ–Ω–∏—è** —á–µ—Ä–µ–∑ NO_PROXY

---

## üîó –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

- üìñ [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](PROXY_USAGE.md)
- üìö [–ü—Ä–∏–º–µ—Ä—ã –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏](PROXY_EXAMPLES.md)
- üíª [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](src/config.ts)
